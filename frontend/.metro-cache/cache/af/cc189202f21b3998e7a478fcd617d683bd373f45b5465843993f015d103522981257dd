{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":39,"index":66}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":49,"index":116}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"storage\", {\n    enumerable: true,\n    get: function () {\n      return storage;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // Utilise extra.apiUrl de app.json (inclus dans le build EAS) en prioritÃ©\n  const API_URL = Constants.default.expoConfig?.extra?.apiUrl?.replace(/\\/api$/, '') || process.env.EXPO_PUBLIC_BACKEND_URL || 'https://pilotshare.preview.emergentagent.com';\n  const api = axios.default.create({\n    baseURL: API_URL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Storage wrapper compatible web + native\n  const storage = {\n    async getItem(key) {\n      if (Platform.default.OS === 'web') {\n        return localStorage.getItem(key);\n      }\n      return await SecureStore.getItemAsync(key);\n    },\n    async setItem(key, value) {\n      if (Platform.default.OS === 'web') {\n        localStorage.setItem(key, value);\n      } else {\n        await SecureStore.setItemAsync(key, value);\n      }\n    },\n    async deleteItem(key) {\n      if (Platform.default.OS === 'web') {\n        localStorage.removeItem(key);\n      } else {\n        await SecureStore.deleteItemAsync(key);\n      }\n    }\n  };\n\n  // Request interceptor to add token\n  api.interceptors.request.use(async config => {\n    // Ne pas ajouter de token pour les routes d'authentification\n    const isAuthRoute = config.url?.includes('/auth/login') || config.url?.includes('/auth/signup');\n    if (!isAuthRoute) {\n      const token = await storage.getItem('auth_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":95,"map":[[27,2,63,0,"Object"],[27,8,63,0],[27,9,63,0,"defineProperty"],[27,23,63,0],[27,24,63,0,"exports"],[27,31,63,0],[28,4,63,0,"enumerable"],[28,14,63,0],[29,4,63,0,"get"],[29,7,63,0],[29,18,63,0,"get"],[29,19,63,0],[30,6,63,0],[30,13,63,0,"_default"],[30,21,63,0],[31,4,63,0],[32,2,63,0],[33,2,62,0,"Object"],[33,8,62,0],[33,9,62,0,"defineProperty"],[33,23,62,0],[33,24,62,0,"exports"],[33,31,62,0],[34,4,62,0,"enumerable"],[34,14,62,0],[35,4,62,0,"get"],[35,7,62,0],[35,18,62,0,"get"],[35,19,62,0],[36,6,62,0],[36,13,62,9,"storage"],[36,20,62,16],[37,4,62,16],[38,2,62,16],[39,2,1,0],[39,6,1,0,"_axios"],[39,12,1,0],[39,15,1,0,"require"],[39,22,1,0],[39,23,1,0,"_dependencyMap"],[39,37,1,0],[40,2,1,0],[40,6,1,0,"axios"],[40,11,1,0],[40,14,1,0,"_interopDefault"],[40,29,1,0],[40,30,1,0,"_axios"],[40,36,1,0],[41,2,2,0],[41,6,2,0,"_expoConstants"],[41,20,2,0],[41,23,2,0,"require"],[41,30,2,0],[41,31,2,0,"_dependencyMap"],[41,45,2,0],[42,2,2,0],[42,6,2,0,"Constants"],[42,15,2,0],[42,18,2,0,"_interopDefault"],[42,33,2,0],[42,34,2,0,"_expoConstants"],[42,48,2,0],[43,2,3,0],[43,6,3,0,"_expoSecureStore"],[43,22,3,0],[43,25,3,0,"require"],[43,32,3,0],[43,33,3,0,"_dependencyMap"],[43,47,3,0],[44,2,3,0],[44,6,3,0,"SecureStore"],[44,17,3,0],[44,20,3,0,"_interopNamespace"],[44,37,3,0],[44,38,3,0,"_expoSecureStore"],[44,54,3,0],[45,2,3,49],[45,6,3,49,"_reactNativeWebDistExportsPlatform"],[45,40,3,49],[45,43,3,49,"require"],[45,50,3,49],[45,51,3,49,"_dependencyMap"],[45,65,3,49],[46,2,3,49],[46,6,3,49,"Platform"],[46,14,3,49],[46,17,3,49,"_interopDefault"],[46,32,3,49],[46,33,3,49,"_reactNativeWebDistExportsPlatform"],[46,67,3,49],[47,2,6,0],[48,2,7,0],[48,8,7,6,"API_URL"],[48,15,7,13],[48,18,7,16,"Constants"],[48,27,7,25],[48,28,7,25,"default"],[48,35,7,25],[48,36,7,26,"expoConfig"],[48,46,7,36],[48,48,7,38,"extra"],[48,53,7,43],[48,55,7,45,"apiUrl"],[48,61,7,51],[48,63,7,53,"replace"],[48,70,7,60],[48,71,7,61],[48,79,7,69],[48,81,7,71],[48,83,7,73],[48,84,7,74],[48,88,8,16,"process"],[48,95,8,23],[48,96,8,24,"env"],[48,99,8,27],[48,100,8,28,"EXPO_PUBLIC_BACKEND_URL"],[48,123,8,51],[48,127,9,16],[48,174,9,63],[49,2,11,0],[49,8,11,6,"api"],[49,11,11,9],[49,14,11,12,"axios"],[49,19,11,17],[49,20,11,17,"default"],[49,27,11,17],[49,28,11,18,"create"],[49,34,11,24],[49,35,11,25],[50,4,12,2,"baseURL"],[50,11,12,9],[50,13,12,11,"API_URL"],[50,20,12,18],[51,4,13,2,"headers"],[51,11,13,9],[51,13,13,11],[52,6,14,4],[52,20,14,18],[52,22,14,20],[53,4,15,2],[54,2,16,0],[54,3,16,1],[54,4,16,2],[56,2,18,0],[57,2,19,0],[57,8,19,6,"storage"],[57,15,19,13],[57,18,19,16],[58,4,20,2],[58,10,20,8,"getItem"],[58,17,20,15,"getItem"],[58,18,20,16,"key"],[58,21,20,27],[58,23,20,53],[59,6,21,4],[59,10,21,8,"Platform"],[59,18,21,16],[59,19,21,16,"default"],[59,26,21,16],[59,27,21,17,"OS"],[59,29,21,19],[59,34,21,24],[59,39,21,29],[59,41,21,31],[60,8,22,6],[60,15,22,13,"localStorage"],[60,27,22,25],[60,28,22,26,"getItem"],[60,35,22,33],[60,36,22,34,"key"],[60,39,22,37],[60,40,22,38],[61,6,23,4],[62,6,24,4],[62,13,24,11],[62,19,24,17,"SecureStore"],[62,30,24,28],[62,31,24,29,"getItemAsync"],[62,43,24,41],[62,44,24,42,"key"],[62,47,24,45],[62,48,24,46],[63,4,25,2],[63,5,25,3],[64,4,26,2],[64,10,26,8,"setItem"],[64,17,26,15,"setItem"],[64,18,26,16,"key"],[64,21,26,27],[64,23,26,29,"value"],[64,28,26,42],[64,30,26,59],[65,6,27,4],[65,10,27,8,"Platform"],[65,18,27,16],[65,19,27,16,"default"],[65,26,27,16],[65,27,27,17,"OS"],[65,29,27,19],[65,34,27,24],[65,39,27,29],[65,41,27,31],[66,8,28,6,"localStorage"],[66,20,28,18],[66,21,28,19,"setItem"],[66,28,28,26],[66,29,28,27,"key"],[66,32,28,30],[66,34,28,32,"value"],[66,39,28,37],[66,40,28,38],[67,6,29,4],[67,7,29,5],[67,13,29,11],[68,8,30,6],[68,14,30,12,"SecureStore"],[68,25,30,23],[68,26,30,24,"setItemAsync"],[68,38,30,36],[68,39,30,37,"key"],[68,42,30,40],[68,44,30,42,"value"],[68,49,30,47],[68,50,30,48],[69,6,31,4],[70,4,32,2],[70,5,32,3],[71,4,33,2],[71,10,33,8,"deleteItem"],[71,20,33,18,"deleteItem"],[71,21,33,19,"key"],[71,24,33,30],[71,26,33,47],[72,6,34,4],[72,10,34,8,"Platform"],[72,18,34,16],[72,19,34,16,"default"],[72,26,34,16],[72,27,34,17,"OS"],[72,29,34,19],[72,34,34,24],[72,39,34,29],[72,41,34,31],[73,8,35,6,"localStorage"],[73,20,35,18],[73,21,35,19,"removeItem"],[73,31,35,29],[73,32,35,30,"key"],[73,35,35,33],[73,36,35,34],[74,6,36,4],[74,7,36,5],[74,13,36,11],[75,8,37,6],[75,14,37,12,"SecureStore"],[75,25,37,23],[75,26,37,24,"deleteItemAsync"],[75,41,37,39],[75,42,37,40,"key"],[75,45,37,43],[75,46,37,44],[76,6,38,4],[77,4,39,2],[78,2,40,0],[78,3,40,1],[80,2,42,0],[81,2,43,0,"api"],[81,5,43,3],[81,6,43,4,"interceptors"],[81,18,43,16],[81,19,43,17,"request"],[81,26,43,24],[81,27,43,25,"use"],[81,30,43,28],[81,31,44,2],[81,37,44,9,"config"],[81,43,44,15],[81,47,44,20],[82,4,45,4],[83,4,46,4],[83,10,46,10,"isAuthRoute"],[83,21,46,21],[83,24,46,24,"config"],[83,30,46,30],[83,31,46,31,"url"],[83,34,46,34],[83,36,46,36,"includes"],[83,44,46,44],[83,45,46,45],[83,58,46,58],[83,59,46,59],[83,63,47,24,"config"],[83,69,47,30],[83,70,47,31,"url"],[83,73,47,34],[83,75,47,36,"includes"],[83,83,47,44],[83,84,47,45],[83,98,47,59],[83,99,47,60],[84,4,49,4],[84,8,49,8],[84,9,49,9,"isAuthRoute"],[84,20,49,20],[84,22,49,22],[85,6,50,6],[85,12,50,12,"token"],[85,17,50,17],[85,20,50,20],[85,26,50,26,"storage"],[85,33,50,33],[85,34,50,34,"getItem"],[85,41,50,41],[85,42,50,42],[85,54,50,54],[85,55,50,55],[86,6,51,6],[86,10,51,10,"token"],[86,15,51,15],[86,17,51,17],[87,8,52,8,"config"],[87,14,52,14],[87,15,52,15,"headers"],[87,22,52,22],[87,23,52,23,"Authorization"],[87,36,52,36],[87,39,52,39],[87,49,52,49,"token"],[87,54,52,54],[87,56,52,56],[88,6,53,6],[89,4,54,4],[90,4,55,4],[90,11,55,11,"config"],[90,17,55,17],[91,2,56,2],[91,3,56,3],[91,5,57,3,"error"],[91,10,57,8],[91,14,57,13],[92,4,58,4],[92,11,58,11,"Promise"],[92,18,58,18],[92,19,58,19,"reject"],[92,25,58,25],[92,26,58,26,"error"],[92,31,58,31],[92,32,58,32],[93,2,59,2],[93,3,60,0],[93,4,60,1],[94,2,63,0],[94,6,63,0,"_default"],[94,14,63,0],[94,17,63,15,"api"],[94,20,63,18],[95,0,63,19],[95,3]],"functionMap":{"names":["<global>","storage.getItem","storage.setItem","storage.deleteItem","interceptors.request.use$argument_0","interceptors.request.use$argument_1"],"mappings":"AAA;ECmB;GDK;EEC;GFM;EGC;GHM;EIK;GJY;EKC;GLE"},"hasCjsExports":false},"type":"js/module"}]}