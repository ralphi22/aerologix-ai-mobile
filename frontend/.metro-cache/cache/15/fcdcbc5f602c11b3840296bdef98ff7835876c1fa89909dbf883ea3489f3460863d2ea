{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./NativeBlobModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0},"end":{"line":13,"column":50}}],"key":"U6TvaDH8SXQ+L3uxoXKyiOMXH+8=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0},"end":{"line":14,"column":34}}],"key":"4HPAaDQ25ZwZ2dzTLatXuUucZUM=","exportNames":["*"],"imports":1}},{"name":"./Blob","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":13},"end":{"line":16,"column":30}}],"key":"mgvDEIvsyYQQJCSt18UmaoHoX6k=","exportNames":["*"],"imports":1}},{"name":"./BlobRegistry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":21},"end":{"line":17,"column":46}}],"key":"JHbMLLFwEH95R1ixWPXDXrku130=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _NativeBlobModule = require(_dependencyMap[2], \"./NativeBlobModule\");\n  var NativeBlobModule = _interopDefault(_NativeBlobModule);\n  var _invariant = require(_dependencyMap[3], \"invariant\");\n  var invariant = _interopDefault(_invariant);\n  var Blob = require(_dependencyMap[4], \"./Blob\");\n  var BlobRegistry = require(_dependencyMap[5], \"./BlobRegistry\");\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n  var BlobManager = /*#__PURE__*/function () {\n    function BlobManager() {\n      (0, _classCallCheck.default)(this, BlobManager);\n    }\n    return (0, _createClass.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n          if (part instanceof Blob) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        NativeBlobModule.default.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        BlobRegistry.register(options.blobId);\n        return Object.assign(Object.create(Blob.prototype), {\n          data: options.__collector == null ? Object.assign({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        BlobRegistry.unregister(blobId);\n        if (BlobRegistry.has(blobId)) {\n          return;\n        }\n        NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, invariant.default)(NativeBlobModule.default, 'NativeBlobModule is available.');\n        NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n  }();\n  BlobManager.isAvailable = !!NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":122,"map":[[13,2,13,0],[13,6,13,0,"_NativeBlobModule"],[13,23,13,0],[13,26,13,0,"require"],[13,33,13,0],[13,34,13,0,"_dependencyMap"],[13,48,13,0],[14,2,13,0],[14,6,13,0,"NativeBlobModule"],[14,22,13,0],[14,25,13,0,"_interopDefault"],[14,40,13,0],[14,41,13,0,"_NativeBlobModule"],[14,58,13,0],[15,2,14,0],[15,6,14,0,"_invariant"],[15,16,14,0],[15,19,14,0,"require"],[15,26,14,0],[15,27,14,0,"_dependencyMap"],[15,41,14,0],[16,2,14,0],[16,6,14,0,"invariant"],[16,15,14,0],[16,18,14,0,"_interopDefault"],[16,33,14,0],[16,34,14,0,"_invariant"],[16,44,14,0],[17,2,16,0],[17,6,16,6,"Blob"],[17,10,16,10],[17,13,16,13,"require"],[17,20,16,20],[17,21,16,20,"_dependencyMap"],[17,35,16,20],[17,48,16,29],[17,49,16,30],[18,2,17,0],[18,6,17,6,"BlobRegistry"],[18,18,17,18],[18,21,17,21,"require"],[18,28,17,28],[18,29,17,28,"_dependencyMap"],[18,43,17,28],[18,64,17,45],[18,65,17,46],[19,2,26,0],[19,11,26,9,"uuidv4"],[19,17,26,15,"uuidv4"],[19,18,26,15],[19,20,26,26],[20,4,27,2],[20,11,27,9],[20,49,27,47],[20,50,27,48,"replace"],[20,57,27,55],[20,58,27,56],[20,65,27,63],[20,67,27,65],[20,77,27,65,"c"],[20,78,27,66],[20,80,27,70],[21,6,28,4],[21,10,28,10,"r"],[21,11,28,11],[21,14,28,15,"Math"],[21,18,28,19],[21,19,28,20,"random"],[21,25,28,26],[21,26,28,27],[21,27,28,28],[21,30,28,31],[21,32,28,33],[21,35,28,37],[21,36,28,38],[22,8,29,6,"v"],[22,9,29,7],[22,12,29,10,"c"],[22,13,29,11],[22,17,29,15],[22,20,29,18],[22,23,29,21,"r"],[22,24,29,22],[22,27,29,26,"r"],[22,28,29,27],[22,31,29,30],[22,34,29,33],[22,37,29,37],[22,40,29,40],[23,6,30,4],[23,13,30,11,"v"],[23,14,30,12],[23,15,30,13,"toString"],[23,23,30,21],[23,24,30,22],[23,26,30,24],[23,27,30,25],[24,4,31,2],[24,5,31,3],[24,6,31,4],[25,2,32,0],[26,2,41,0],[26,11,41,9,"createBlobCollector"],[26,30,41,28,"createBlobCollector"],[26,31,41,29,"blobId"],[26,37,41,43],[26,39,41,67],[27,4,42,2],[27,8,42,6,"global"],[27,14,42,12],[27,15,42,13,"__blobCollectorProvider"],[27,38,42,36],[27,42,42,40],[27,46,42,44],[27,48,42,46],[28,6,43,4],[28,13,43,11],[28,17,43,15],[29,4,44,2],[29,5,44,3],[29,11,44,9],[30,6,45,4],[30,13,45,11,"global"],[30,19,45,17],[30,20,45,18,"__blobCollectorProvider"],[30,43,45,41],[30,44,45,42,"blobId"],[30,50,45,48],[30,51,45,49],[31,4,46,2],[32,2,47,0],[33,2,47,1],[33,6,52,6,"BlobManager"],[33,17,52,17],[34,4,52,17],[34,13,52,17,"BlobManager"],[34,25,52,17],[35,6,52,17],[35,10,52,17,"_classCallCheck"],[35,25,52,17],[35,26,52,17,"default"],[35,33,52,17],[35,41,52,17,"BlobManager"],[35,52,52,17],[36,4,52,17],[37,4,52,17],[37,15,52,17,"_createClass"],[37,27,52,17],[37,28,52,17,"default"],[37,35,52,17],[37,37,52,17,"BlobManager"],[37,48,52,17],[38,6,52,17,"key"],[38,9,52,17],[39,6,52,17,"value"],[39,11,52,17],[39,13,61,2],[39,22,61,9,"createFromParts"],[39,37,61,24,"createFromParts"],[39,38,62,4,"parts"],[39,43,62,31],[39,45,63,4,"options"],[39,52,63,25],[39,54,64,10],[40,8,65,4],[40,12,65,4,"invariant"],[40,21,65,13],[40,22,65,13,"default"],[40,29,65,13],[40,31,65,14,"NativeBlobModule"],[40,47,65,30],[40,48,65,30,"default"],[40,55,65,30],[40,57,65,32],[40,89,65,64],[40,90,65,65],[41,8,67,4],[41,12,67,10,"blobId"],[41,18,67,16],[41,21,67,19,"uuidv4"],[41,27,67,25],[41,28,67,26],[41,29,67,27],[42,8,68,4],[42,12,68,10,"items"],[42,17,68,15],[42,20,68,18,"parts"],[42,25,68,23],[42,26,68,24,"map"],[42,29,68,27],[42,30,68,28],[42,40,68,28,"part"],[42,44,68,32],[42,46,68,36],[43,10,69,6],[43,14,69,10,"part"],[43,18,69,14],[43,30,69,26,"ArrayBuffer"],[43,41,69,37],[43,45,69,41,"ArrayBuffer"],[43,56,69,52],[43,57,69,53,"isView"],[43,63,69,59],[43,64,69,60,"part"],[43,68,69,64],[43,69,69,65],[43,71,69,67],[44,12,70,8],[44,18,70,14],[44,22,70,18,"Error"],[44,27,70,23],[44,28,71,10],[44,103,72,8],[44,104,72,9],[45,10,73,6],[46,10,74,6],[46,14,74,10,"part"],[46,18,74,14],[46,30,74,26,"Blob"],[46,34,74,30],[46,36,74,32],[47,12,75,8],[47,19,75,15],[48,14,76,10,"data"],[48,18,76,14],[48,20,76,16,"part"],[48,24,76,20],[48,25,76,21,"data"],[48,29,76,25],[49,14,77,10,"type"],[49,18,77,14],[49,20,77,16],[50,12,78,8],[50,13,78,9],[51,10,79,6],[51,11,79,7],[51,17,79,13],[52,12,80,8],[52,19,80,15],[53,14,81,10,"data"],[53,18,81,14],[53,20,81,16,"String"],[53,26,81,22],[53,27,81,23,"part"],[53,31,81,27],[53,32,81,28],[54,14,82,10,"type"],[54,18,82,14],[54,20,82,16],[55,12,83,8],[55,13,83,9],[56,10,84,6],[57,8,85,4],[57,9,85,5],[57,10,85,6],[58,8,86,4],[58,12,86,10,"size"],[58,16,86,14],[58,19,86,17,"items"],[58,24,86,22],[58,25,86,23,"reduce"],[58,31,86,29],[58,32,86,30],[58,42,86,31,"acc"],[58,45,86,34],[58,47,86,36,"curr"],[58,51,86,40],[58,53,86,45],[59,10,87,6],[59,14,87,10,"curr"],[59,18,87,14],[59,19,87,15,"type"],[59,23,87,19],[59,28,87,24],[59,36,87,32],[59,38,87,34],[60,12,88,8],[60,19,88,15,"acc"],[60,22,88,18],[60,25,88,21,"global"],[60,31,88,27],[60,32,88,28,"unescape"],[60,40,88,36],[60,41,88,37,"encodeURI"],[60,50,88,46],[60,51,88,47,"curr"],[60,55,88,51],[60,56,88,52,"data"],[60,60,88,56],[60,61,88,57],[60,62,88,58],[60,63,88,59,"length"],[60,69,88,65],[61,10,89,6],[61,11,89,7],[61,17,89,13],[62,12,90,8],[62,19,90,15,"acc"],[62,22,90,18],[62,25,90,21,"curr"],[62,29,90,25],[62,30,90,26,"data"],[62,34,90,30],[62,35,90,31,"size"],[62,39,90,35],[63,10,91,6],[64,8,92,4],[64,9,92,5],[64,11,92,7],[64,12,92,8],[64,13,92,9],[65,8,94,4,"NativeBlobModule"],[65,24,94,20],[65,25,94,20,"default"],[65,32,94,20],[65,33,94,21,"createFromParts"],[65,48,94,36],[65,49,94,37,"items"],[65,54,94,42],[65,56,94,44,"blobId"],[65,62,94,50],[65,63,94,51],[66,8,96,4],[66,15,96,11,"BlobManager"],[66,26,96,22],[66,27,96,23,"createFromOptions"],[66,44,96,40],[66,45,96,41],[67,10,97,6,"blobId"],[67,16,97,12],[67,18,97,6,"blobId"],[67,24,97,12],[68,10,98,6,"offset"],[68,16,98,12],[68,18,98,14],[68,19,98,15],[69,10,99,6,"size"],[69,14,99,10],[69,16,99,6,"size"],[69,20,99,10],[70,10,100,6,"type"],[70,14,100,10],[70,16,100,12,"options"],[70,23,100,19],[70,26,100,22,"options"],[70,33,100,29],[70,34,100,30,"type"],[70,38,100,34],[70,41,100,37],[70,43,100,39],[71,10,101,6,"lastModified"],[71,22,101,18],[71,24,101,20,"options"],[71,31,101,27],[71,34,101,30,"options"],[71,41,101,37],[71,42,101,38,"lastModified"],[71,54,101,50],[71,57,101,53,"Date"],[71,61,101,57],[71,62,101,58,"now"],[71,65,101,61],[71,66,101,62],[72,8,102,4],[72,9,102,5],[72,10,102,6],[73,6,103,2],[74,4,103,3],[75,6,103,3,"key"],[75,9,103,3],[76,6,103,3,"value"],[76,11,103,3],[76,13,109,2],[76,22,109,9,"createFromOptions"],[76,39,109,26,"createFromOptions"],[76,40,109,27,"options"],[76,47,109,44],[76,49,109,52],[77,8,110,4,"BlobRegistry"],[77,20,110,16],[77,21,110,17,"register"],[77,29,110,25],[77,30,110,26,"options"],[77,37,110,33],[77,38,110,34,"blobId"],[77,44,110,40],[77,45,110,41],[78,8,112,4],[78,15,112,11,"Object"],[78,21,112,17],[78,22,112,18,"assign"],[78,28,112,24],[78,29,112,25,"Object"],[78,35,112,31],[78,36,112,32,"create"],[78,42,112,38],[78,43,112,39,"Blob"],[78,47,112,43],[78,48,112,44,"prototype"],[78,57,112,53],[78,58,112,54],[78,60,112,56],[79,10,113,6,"data"],[79,14,113,10],[79,16,117,8,"options"],[79,23,117,15],[79,24,117,16,"__collector"],[79,35,117,27],[79,39,117,31],[79,43,117,35],[79,46,117,35,"Object"],[79,52,117,35],[79,53,117,35,"assign"],[79,59,117,35],[79,64,119,17,"options"],[79,71,119,24],[80,12,120,14,"__collector"],[80,23,120,25],[80,25,120,27,"createBlobCollector"],[80,44,120,46],[80,45,120,47,"options"],[80,52,120,54],[80,53,120,55,"blobId"],[80,59,120,61],[81,10,120,62],[81,15,122,12,"options"],[82,8,123,4],[82,9,123,5],[82,10,123,6],[83,6,124,2],[84,4,124,3],[85,6,124,3,"key"],[85,9,124,3],[86,6,124,3,"value"],[86,11,124,3],[86,13,129,2],[86,22,129,9,"release"],[86,29,129,16,"release"],[86,30,129,17,"blobId"],[86,36,129,31],[86,38,129,39],[87,8,130,4],[87,12,130,4,"invariant"],[87,21,130,13],[87,22,130,13,"default"],[87,29,130,13],[87,31,130,14,"NativeBlobModule"],[87,47,130,30],[87,48,130,30,"default"],[87,55,130,30],[87,57,130,32],[87,89,130,64],[87,90,130,65],[88,8,132,4,"BlobRegistry"],[88,20,132,16],[88,21,132,17,"unregister"],[88,31,132,27],[88,32,132,28,"blobId"],[88,38,132,34],[88,39,132,35],[89,8,133,4],[89,12,133,8,"BlobRegistry"],[89,24,133,20],[89,25,133,21,"has"],[89,28,133,24],[89,29,133,25,"blobId"],[89,35,133,31],[89,36,133,32],[89,38,133,34],[90,10,134,6],[91,8,135,4],[92,8,136,4,"NativeBlobModule"],[92,24,136,20],[92,25,136,20,"default"],[92,32,136,20],[92,33,136,21,"release"],[92,40,136,28],[92,41,136,29,"blobId"],[92,47,136,35],[92,48,136,36],[93,6,137,2],[94,4,137,3],[95,6,137,3,"key"],[95,9,137,3],[96,6,137,3,"value"],[96,11,137,3],[96,13,143,2],[96,22,143,9,"addNetworkingHandler"],[96,42,143,29,"addNetworkingHandler"],[96,43,143,29],[96,45,143,38],[97,8,144,4],[97,12,144,4,"invariant"],[97,21,144,13],[97,22,144,13,"default"],[97,29,144,13],[97,31,144,14,"NativeBlobModule"],[97,47,144,30],[97,48,144,30,"default"],[97,55,144,30],[97,57,144,32],[97,89,144,64],[97,90,144,65],[98,8,146,4,"NativeBlobModule"],[98,24,146,20],[98,25,146,20,"default"],[98,32,146,20],[98,33,146,21,"addNetworkingHandler"],[98,53,146,41],[98,54,146,42],[98,55,146,43],[99,6,147,2],[100,4,147,3],[101,6,147,3,"key"],[101,9,147,3],[102,6,147,3,"value"],[102,11,147,3],[102,13,153,2],[102,22,153,9,"addWebSocketHandler"],[102,41,153,28,"addWebSocketHandler"],[102,42,153,29,"socketId"],[102,50,153,45],[102,52,153,53],[103,8,154,4],[103,12,154,4,"invariant"],[103,21,154,13],[103,22,154,13,"default"],[103,29,154,13],[103,31,154,14,"NativeBlobModule"],[103,47,154,30],[103,48,154,30,"default"],[103,55,154,30],[103,57,154,32],[103,89,154,64],[103,90,154,65],[104,8,156,4,"NativeBlobModule"],[104,24,156,20],[104,25,156,20,"default"],[104,32,156,20],[104,33,156,21,"addWebSocketHandler"],[104,52,156,40],[104,53,156,41,"socketId"],[104,61,156,49],[104,62,156,50],[105,6,157,2],[106,4,157,3],[107,6,157,3,"key"],[107,9,157,3],[108,6,157,3,"value"],[108,11,157,3],[108,13,163,2],[108,22,163,9,"removeWebSocketHandler"],[108,44,163,31,"removeWebSocketHandler"],[108,45,163,32,"socketId"],[108,53,163,48],[108,55,163,56],[109,8,164,4],[109,12,164,4,"invariant"],[109,21,164,13],[109,22,164,13,"default"],[109,29,164,13],[109,31,164,14,"NativeBlobModule"],[109,47,164,30],[109,48,164,30,"default"],[109,55,164,30],[109,57,164,32],[109,89,164,64],[109,90,164,65],[110,8,166,4,"NativeBlobModule"],[110,24,166,20],[110,25,166,20,"default"],[110,32,166,20],[110,33,166,21,"removeWebSocketHandler"],[110,55,166,43],[110,56,166,44,"socketId"],[110,64,166,52],[110,65,166,53],[111,6,167,2],[112,4,167,3],[113,6,167,3,"key"],[113,9,167,3],[114,6,167,3,"value"],[114,11,167,3],[114,13,172,2],[114,22,172,9,"sendOverSocket"],[114,36,172,23,"sendOverSocket"],[114,37,172,24,"blob"],[114,41,172,34],[114,43,172,36,"socketId"],[114,51,172,52],[114,53,172,60],[115,8,173,4],[115,12,173,4,"invariant"],[115,21,173,13],[115,22,173,13,"default"],[115,29,173,13],[115,31,173,14,"NativeBlobModule"],[115,47,173,30],[115,48,173,30,"default"],[115,55,173,30],[115,57,173,32],[115,89,173,64],[115,90,173,65],[116,8,175,4,"NativeBlobModule"],[116,24,175,20],[116,25,175,20,"default"],[116,32,175,20],[116,33,175,21,"sendOverSocket"],[116,47,175,35],[116,48,175,36,"blob"],[116,52,175,40],[116,53,175,41,"data"],[116,57,175,45],[116,59,175,47,"socketId"],[116,67,175,55],[116,68,175,56],[117,6,176,2],[118,4,176,3],[119,2,176,3],[120,2,52,6,"BlobManager"],[120,13,52,17],[120,14,56,9,"isAvailable"],[120,25,56,20],[120,28,56,32],[120,29,56,33],[120,30,56,34,"NativeBlobModule"],[120,46,56,50],[120,47,56,50,"default"],[120,54,56,50],[121,2,179,0,"module"],[121,8,179,6],[121,9,179,7,"exports"],[121,16,179,14],[121,19,179,17,"BlobManager"],[121,30,179,28],[122,0,179,29],[122,3]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;ACyB;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDiB;8BEC;KFM;GDW;EIM;GJe;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"},"hasCjsExports":true},"type":"js/module"}]}